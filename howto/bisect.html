<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-10-28 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Mikolaj Izdebski" />
    <meta name="Date-Creation-yyyymmdd" content="20130321" />
    <meta name="Date-Revision-yyyymmdd" content="20151028" />
    <meta http-equiv="Content-Language" content="en" />
    <title>XMvn &#x2013; Debugging builds using bisection method</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.4.min.js"></script>

    
                  </head>
        <body class="topBarEnabled">
          
                
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
                
                                <ul class="nav">
                                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../configuration.html"  title="Configuration">Configuration</a>
</li>
                  
                      <li>      <a href="../config.html"  title="Configuration Reference">Configuration Reference</a>
</li>
                  
                      <li>      <a href="../metadata.html"  title="Metadata Reference">Metadata Reference</a>
</li>
                  
                      <li>      <a href="../apidocs/"  title="API Documentation">API Documentation</a>
</li>
                  
                      <li class="dropdown-submenu">
                                      <a href="../howto/index.html"  title="Tutorials">Tutorials</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="../howto/bisect.html"  title="Using XMvn Bisect">Using XMvn Bisect</a>
</li>
                                  <li>      <a href="../howto/embed.html"  title="Embedding XMvn in your application">Embedding XMvn in your application</a>
</li>
                                  <li>      <a href="../howto/extend.html"  title="Creating extension for XMvn">Creating extension for XMvn</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../patches.html"  title="Contributing Patches">Contributing Patches</a>
</li>
                          </ul>
      </li>
                  </ul>
          
          
          
                               <ul class="nav pull-right">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">External Links <b class="caret"></b></a>
                <ul class="dropdown-menu">
                      <li>      <a href="http://fedoraproject.org/wiki/SIGs/Java"  target="_blank" title="Fedora Java SIG">Fedora Java SIG</a>
</li>
      <li>      <a href="http://fedoraproject.org/wiki/Java"  target="_blank" title="Fedora Java">Fedora Java</a>
</li>
      <li>      <a href="http://fedoraproject.org/"  target="_blank" title="Fedora Project">Fedora Project</a>
</li>
      <li>      <a href="http://maven.apache.org/"  target="_blank" title="Apache Maven">Apache Maven</a>
</li>
      <li>      <a href="http://plexus.codehaus.org/"  target="_blank" title="Plexus">Plexus</a>
</li>
                  </ul>
              </li>
            </ul>
          
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>XMvn</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-10-28
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 2.5.0
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                          
      <li>
  
                          <a href="../about.html" title="About XMvn">
          <span class="none"></span>
        About XMvn</a>
            </li>
                
      <li>
  
                          <a href="../download.html" title="Download">
          <span class="none"></span>
        Download</a>
            </li>
                
      <li>
  
                          <a href="../news.html" title="Release notes">
          <span class="none"></span>
        Release notes</a>
            </li>
                
      <li>
  
                          <a href="../contact.html" title="Contact">
          <span class="none"></span>
        Contact</a>
            </li>
                
      <li>
  
                          <a href="../copyright.html" title="Copyright">
          <span class="none"></span>
        Copyright</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                              
      <li>
  
                          <a href="../configuration.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                
      <li>
  
                          <a href="../config.html" title="Configuration Reference">
          <span class="none"></span>
        Configuration Reference</a>
            </li>
                
      <li>
  
                          <a href="../metadata.html" title="Metadata Reference">
          <span class="none"></span>
        Metadata Reference</a>
            </li>
                
      <li>
  
                          <a href="../apidocs/" title="API Documentation">
          <span class="none"></span>
        API Documentation</a>
            </li>
                                                                                                                
      <li>
  
                          <a href="../howto/index.html" title="Tutorials">
          <span class="icon-chevron-down"></span>
        Tutorials</a>
                    <ul class="nav nav-list">
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>Using XMvn Bisect</a>
          </li>
                    
      <li>
  
                          <a href="../howto/embed.html" title="Embedding XMvn in your application">
          <span class="none"></span>
        Embedding XMvn in your application</a>
            </li>
                    
      <li>
  
                          <a href="../howto/extend.html" title="Creating extension for XMvn">
          <span class="none"></span>
        Creating extension for XMvn</a>
            </li>
              </ul>
        </li>
                              <li class="nav-header">Contribute</li>
                              
      <li>
  
                          <a href="../patches.html" title="Contributing Patches">
          <span class="none"></span>
        Contributing Patches</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <div class="section">
<h2><a name="Debugging_builds_using_bisection_method"></a>Debugging builds using bisection method</h2>
<div class="section">
<h3><a name="Abstract"></a>Abstract</h3>
<p>If your local build fails, but you can build the same sources with upstream Maven then you can use <tt>xmvn-bisect</tt> tool to debug your build.</p>
<p>This command will first build your project in pure local and pure upstream modes and then try different combinations of upstream and local artifacts. It will point to two builds that differ only by one dependency. Normally one of the builds will be successful and the other one failed. Diff between these build logs can be very helpful when debugging build failure.</p></div>
<div class="section">
<h3><a name="Requirements"></a>Requirements</h3>
<p>To use <tt>xmvn-bisect</tt> tool to debug build failure of a project the following conditions must be met (hard requirements):</p>
<ul>
<li>the all project dependencies are available in both system repository and some external repository (upstream repository; for example Maven Central),</li>
<li>project build initiated from local repository fails,</li>
<li>project build initiated from upstream repository succeeds.</li></ul>
<p>XMvn Bisect can give poor results unless the following conditions are met (soft requirements):</p>
<ul>
<li>the build is stable (there is no hazard; random build failures will likely cause false positives and greatly reduce usefulness of the result),</li>
<li>only one dependency artifact is causing build failure in local mode (if there are multiple reasons of build failure then <tt>xmvn-bisect</tt> may be able to find one of them, but it can just fail to find any reason at all).</li></ul></div>
<div class="section">
<h3><a name="Preparation"></a>Preparation</h3>
<p>Before you start debugging a project with <tt>xmvn-bisect</tt> it is recommended that you clean local repositories (like <tt>$HOME/.m2</tt> and <tt>$PWD/.xm2</tt>) from any artifacts which are present in the reactor, if possible. This may be impossible if the project being built depends on itself.</p>
<p>It is also recommended to build the project from upstream repository attempting to run <tt>xmvn-bisect</tt>. This will cause any dependency artifacts to be downloaded and cached in local repository. After this step is complete <tt>xmvn-bisect</tt> can be ran in offline mode. Doing this should reduce pollution of build logs (otherwise some logs might contain lines informing about artifacts being downloaded) and reduce hazard in general (for example upstream artifact being accidentally used instead of local one).</p></div>
<div class="section">
<h3><a name="Running_XMvn_Bisect"></a>Running XMvn Bisect</h3>
<p>XMvn Bisect supports most of standard Maven command-line options. Run <tt>xmvn-bisect -h</tt> to see the full list of supported command-line options along with their meanings.</p>
<p>In most cases building project with XMvn Bisect is as simple as using standard Maven command and replacing <tt>mvn</tt> with <tt>xmvn-bisect</tt>, for example <tt>xmvn-bisect clean compile</tt> or <tt>xmvn-bisect -o -X -P jdk7 -Dmaven.test.skip=true clean verify</tt>.</p></div>
<div class="section">
<h3><a name="Analyzing_output"></a>Analyzing output</h3>
<p>Upon successful completion of the command there should be several build logs in current working directory. Name of the logs are prefixed with <tt>bisect-</tt>. Two builds, usually one failed and one successful, should be pointed to. A command to see the diff between two build logs should also be given. For example:</p>
<div>
<pre>[INFO] Failed build:     14, see bisect-build-14.log
[INFO] Successful build: 15, see bisect-build-15.log
[INFO] Try:
[INFO]   $ git diff --no-index --color bisect-build-14.log bisect-build-15.log</pre></div>
<p>The diff between two build logs can be examined to look for differences that could cause build failure.</p></div>
<div class="section">
<h3><a name="Notes"></a>Notes</h3>
<p>It is recommended to enable Maven debugging output (option <tt>-X</tt>) when debugging builds with XMvn Bisect. This doesn't affect XMvn Bisect run itself, but may help investigating the cause of the build failure.</p>
<p>Usually Maven Clean Plugin should be part of the build sequence. XMvn Bisect runs all the builds from the same working directory. Results of previous builds, if not cleaned properly, may interfere with next builds and negatively affect the build. To reduce interference it's usually good to run <tt>clean</tt> as the first goal.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2012&#x2013;2015
                        <a href="http://www.redhat.com/">Red Hat, Inc.</a>.
            All rights reserved.      
                    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
